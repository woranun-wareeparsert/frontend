(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[676],{5676:function(t,s,e){"use strict";e.r(s),e.d(s,{default:function(){return d}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"section",attrs:{id:"app"}},[e("div",{staticClass:"content"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("img",{staticStyle:{width:"432px",height:"587px","margin-left":"15%","margin-right":"15%"},attrs:{src:t.image(t.movie.img_movie)}})]),e("div",{staticClass:"column is-6 level-right"},[e("div",{staticClass:"title"},[e("p",{staticClass:"title has-text-white"},[t._v(t._s(t.movie.m_name))])]),e("hr"),e("div",{staticClass:"detail"},[e("p",{staticClass:"has-text-white has-text-justified"},[t._v(" "+t._s(t.movie.plot)+" ")]),e("table",{staticClass:"table is-bordered has-background-black has-text-white"},[e("tr",[e("td",[t._v("Theatre")]),e("td",[t._v(t._s(t.movie.tname))])]),e("tr",[e("td",[t._v("Date")]),e("td",[t._v(t._s(t.movie.show_date))])]),e("tr",[e("td",[t._v("Time")]),e("td",[t._v(t._s(t.movie.st_time)+" - "+t._s(t.movie.end_time))])]),e("tr",[e("td",[t._v("Language")]),e("td",[t._v(t._s(t.movie.language))])]),e("tr",[e("td",[t._v("Director")]),e("td",[t._v(t._s(t.movie.director))])]),e("tr",[e("td",[t._v("Cast")]),e("td",[t._v(" "+t._s(t.movie.actors)+" ")])])])])])]),e("div",{staticClass:"columns m-5 is-multiline"},[e("div",{staticClass:"column is-8"},[e("table",{staticClass:"mx-auto",staticStyle:{width:"80%"}},[e("tbody",t._l(t.rows,(function(s){return e("tr",{key:s},t._l(t.cols,(function(i){return e("td",{key:i,staticClass:"pl-2"},[t.seatBook.includes(s+i)?e("div",{staticClass:" has-text-white"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969286008040468510/reserved.png"}}),t._v(" "+t._s(s)+t._s(i)+" ")]):t.selectSeats.includes(s+i)&&t.isCusto()?e("a",{on:{click:function(e){return t.selectSeat(s,i)}}},[e("div",{staticClass:" has-text-white"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969286008229220362/select.png"}}),t._v(" "+t._s(s)+t._s(i)+" ")])]):"Normal"==t.getType(s,i)?e("a",{on:{click:function(e){return t.selectSeat(s,i)}}},[e("div",{staticClass:"has-text-white"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005338251274/seat.png"}}),t._v(" "+t._s(s)+t._s(i)+" ")])]):"Honeymoon"==t.getType(s,i)?e("a",{on:{click:function(e){return t.selectSeat(s,i)}}},[e("div",{staticClass:"has-text-white"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005833166878/seatHoneymoon.png"}}),t._v(" "+t._s(s)+t._s(i)+" ")])]):"First Class"==t.getType(s,i)?e("a",{on:{click:function(e){return t.selectSeat(s,i)}}},[e("div",{staticClass:"has-text-white"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005598281798/seatFirstclass.png"}}),t._v(" "+t._s(s)+t._s(i)+" ")])]):t._e()])})),0)})),0)]),t._m(0),t._m(1)]),t.isCusto()?e("div",{staticClass:"column is-4"},[e("p",{staticClass:"has-text-left has-text-white is-size-5"},[t._v("SUMMARY")]),e("div",{staticClass:"box has-text-white has-background-grey"},[e("div",{staticClass:"columns mt-2"},[e("img",{staticStyle:{width:"132px",height:"187px","margin-left":"10%","margin-right":"5%"},attrs:{src:t.image(t.movie.img_movie)}}),e("p",{staticClass:"has-text-left"},[e("b",[t._v(t._s(t.movie.m_name)+" ("+t._s(t.movie.language)+")")]),t._v(" "),e("br"),e("br"),t._v(" "+t._s(t.movie.show_date)+" "),e("br"),t._v(" "+t._s(t.movie.st_time)+" - "+t._s(t.movie.end_time)),e("br"),e("br"),e("span",{staticClass:"is-italic"},[t._v(" "+t._s(t.movie.tname)+" Theatre"),e("br"),t._v(" "+t._s(t.movie.location))])])]),e("div",{staticClass:"columns ml-5"},[e("div",{staticClass:"column is-6 has-text-left"},[t._v("Seats: "+t._s(t.selectSeats))]),e("div",{staticClass:"column is-6"},[t._v("Price: "+t._s(t.priceOrder)+" ฿")])]),t.selectSeats.length>0?e("div",{staticClass:"column"},[e("button",{staticClass:"button is-danger is-fullwidth is-rounded",on:{click:function(s){return t.confirmOrder(t.user.cid)}}},[e("span",[t._v("Confirm Order")])])]):t._e()])]):t._e()])]),t.isCusto()?e("div",{staticClass:"modal",class:{"is-active":t.confirmModal}},[e("div",{staticClass:"modal-background"}),e("div",{staticClass:"modal-card"},[t._m(2),e("section",{staticClass:"modal-card-body"},[e("img",{staticStyle:{width:"132px",height:"187px","margin-left":"10%","margin-right":"5%","margin-bottom":"5%"},attrs:{src:t.image(t.movie.img_movie)}}),e("p",{staticClass:"has-text-centered"},[e("b",[t._v(t._s(t.movie.m_name)+" ("+t._s(t.movie.language)+")")])]),e("br"),e("p",{staticClass:"has-text-left"},[e("b",[t._v("Date:    ")]),t._v(t._s(t.movie.show_date)+", "+t._s(t.movie.st_time)+" - "+t._s(t.movie.end_time))]),e("p",{staticClass:"has-text-left"},[e("b",[t._v("Location:  ")]),t._v(t._s(t.movie.tname)+" Theatre, "+t._s(t.movie.location))]),e("p",{staticClass:"has-text-left"},[e("b",[t._v("Seats:  ")]),t._v(" "+t._s(t.selectSeats))]),e("p",{staticClass:"has-text-left"},[e("b",[t._v("Total Price:  ")]),t._v(" "+t._s(t.priceOrder)+" ฿")])]),e("footer",{staticClass:"modal-card-foot"},[e("router-link",{staticClass:"card-footer-item has-text-light",attrs:{to:"/booking/"+this.orderId}},[e("button",{staticClass:"button is-danger"},[t._v("Yes")])]),e("button",{staticClass:"button",on:{click:function(s){return t.closeModal()}}},[t._v("No")])],1)])]):t._e()])},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"columns is-centered has-background-danger-dark p-2 mt-5"},[e("p",{staticClass:"is-size-3 has-text-white"},[t._v("SCREEN")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"columns is-centered is-multiline mt-5"},[e("div",{staticClass:"column is-1 has-text-white is-size-7"},[e("img",{staticStyle:{width:"80%",height:"60%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005338251274/seat.png"}}),e("br"),t._v("200 ฿ ")]),e("div",{staticClass:"column is-1 has-text-white is-size-7"},[e("img",{staticStyle:{width:"80%",height:"60%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005833166878/seatHoneymoon.png"}}),e("br"),t._v("260 ฿ ")]),e("div",{staticClass:"column is-1 has-text-white is-size-7"},[e("img",{staticStyle:{width:"80%",height:"60%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005598281798/seatFirstclass.png"}}),e("br"),t._v("300 ฿ ")]),e("div",{staticClass:"column is-1 has-text-white is-size-7"},[e("img",{staticStyle:{width:"80%",height:"60%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969286008040468510/reserved.png"}}),e("br"),t._v("Reserved ")]),e("div",{staticClass:"column is-1 has-text-white is-size-7"},[e("img",{staticStyle:{width:"80%",height:"60%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969286008229220362/select.png"}}),e("br"),t._v("Selecting ")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[e("strong",[t._v("Confirm Order")])])])}],o=(e(6699),e(2023),e(561),e(4408)),c={name:"app",props:["user"],data:function(){return{seat:[],movie:[],seatBook:[],rows:[],cols:[],selectSeats:[],color:null,confirmModal:!1,orderId:null,orderType:[],itemId:[],seatId:[]}},mounted:function(){window.scrollTo(0,0),this.getSeat(this.$route.params.id)},computed:{priceOrder:function(){for(var t=0,s=0;s<this.selectSeats.length;s++)for(var e=0;e<this.seat.length;e++)this.seat[e].no_of_seats==this.selectSeats[s]&&(t+=this.seat[e].type_price);return t}},methods:{getSeat:function(t){var s=this;o.Z.get("http://localhost:3000/movie/".concat(t)).then((function(t){s.seat=t.data.seat,s.movie=t.data.movie[0],s.getSeatBook(t.data.seatBook),s.movie.show_date=new Date(s.movie.show_date).toDateString(),1==s.seat[0].THEATRE_tid||2==s.seat[0].THEATRE_tid?(s.rows=["A","B","C","D","E"],s.cols=["01","02","03","04","05","06","07","08","09","10"]):3==s.seat[0].THEATRE_tid&&(s.rows=["A","B","C"],s.cols=["01","02","03","04","05"])})).catch((function(t){console.log(t)}))},getSeatBook:function(t){for(var s=0;s<t.length;s++)this.seatBook.push(t[s].no_of_seats)},selectSeat:function(t,s){this.selectSeats.includes(t+s)?this.selectSeats.splice(this.selectSeats.indexOf(t+s),1):this.selectSeats.push(t+s)},getType:function(t,s){for(var e=0;e<this.seat.length;e++)if(this.seat[e].no_of_seats.includes(t+s))var i=e;return this.seat[i].type_name},confirmOrder:function(t){var s=this;this.confirmModal=!0;for(var e=0;e<this.selectSeats.length;e++)for(var i=0;i<this.seat.length;i++)this.seat[i].no_of_seats==this.selectSeats[e]&&this.orderType.push(this.seat[i].type_price);this.getSeatId(),o.Z.put("http://localhost:3000/movie/confirm/".concat(t),{selectSeat:this.selectSeats,price:this.priceOrder,type:this.orderType,movie:this.movie,seatId:this.seatId}).then((function(t){s.orderId=t.data.orderId,s.itemId=t.data.itemId,console.log(s.orderId)})).catch((function(t){console.log(t)}))},closeModal:function(){this.confirmModal=!1,this.orderType=[],o.Z["delete"]("http://localhost:3000/movie/cancel/".concat(this.orderId),{itemId:this.itemId}).then((function(t){})).catch((function(t){console.log(t)}))},getSeatId:function(){for(var t=0;t<this.selectSeats.length;t++)for(var s=0;s<this.seat.length;s++)this.selectSeats[t]==this.seat[s].no_of_seats&&this.seatId.push(this.seat[s].seat_id);console.log(this.seatId)},image:function(t){return t?"http://localhost:3000/"+t:"https://bulma.io/images/placeholders/640x360.png"},isAdmin:function(){return!!this.user&&"admin"==this.user.role},isCusto:function(){return!!this.user&&"customer"==this.user.role}}},n=c,r=e(1001),l=(0,r.Z)(n,i,a,!1,null,null,null),d=l.exports},4964:function(t,s,e){var i=e(5112),a=i("match");t.exports=function(t){var s=/./;try{"/./"[t](s)}catch(e){try{return s[a]=!1,"/./"[t](s)}catch(i){}}return!1}},3929:function(t,s,e){var i=e(7854),a=e(7850),o=i.TypeError;t.exports=function(t){if(a(t))throw o("The method doesn't accept regular expressions");return t}},6699:function(t,s,e){"use strict";var i=e(2109),a=e(1318).includes,o=e(1223);i({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},2023:function(t,s,e){"use strict";var i=e(2109),a=e(1702),o=e(3929),c=e(4488),n=e(1340),r=e(4964),l=a("".indexOf);i({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~l(n(c(this)),n(o(t)),arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=676-legacy.61b0dd9e.js.map