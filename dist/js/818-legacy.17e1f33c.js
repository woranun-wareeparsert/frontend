"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[818],{9818:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container is-widescreen"},[i("section",{staticClass:"hero"},[i("div",{staticClass:"hero-body"},[i("p",{staticClass:"title has-text-white"},[t._v("รายการภาพยนตร์ทั้งหมด")]),i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-10"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchdetail,expression:"searchdetail"}],staticClass:"input is-danger",attrs:{type:"text",placeholder:"Search Movie"},domProps:{value:t.searchdetail},on:{input:function(e){e.target.composing||(t.searchdetail=e.target.value)}}})]),i("div",{staticClass:"column is-2"},[i("button",{staticClass:"button is-danger px-3 is-fullwidth",on:{click:function(e){return t.getMovie()}}},[i("strong",[t._v("Search")])])])])])]),i("section",{staticClass:"section",attrs:{id:"app"}},[i("div",{staticClass:"field level-right"},[i("div",{staticClass:"control"},[t.isAdmin()?i("router-link",{attrs:{to:"/add/movies"}},[i("button",{staticClass:"button is-warning"},[i("strong",[t._v("Add Movie")])])]):t._e(),0==t.deleteButton&&t.isAdmin()?i("button",{staticClass:"button is-danger ml-5",on:{click:function(e){t.deleteButton=!t.deleteButton}}},[i("strong",[t._v("Edit Movie")])]):t._e(),1==t.deleteButton&&t.isAdmin()?i("button",{staticClass:"button is-info ml-5",on:{click:function(e){t.deleteButton=!t.deleteButton}}},[i("strong",[t._v("Cancel")])]):t._e(),i("div",{staticClass:"select ml-5 is-danger"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.sortdetail,expression:"sortdetail"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortdetail=e.target.multiple?i:i[0]},function(e){return t.getMovie()}]}},[i("option",{attrs:{value:"m_name asc"}},[t._v("เรียงลำดับจาก a-z")]),i("option",{attrs:{value:"m_name desc"}},[t._v("เรียงลำดับจาก z-a")])])])],1)]),i("div",{staticClass:"content"},[i("div",{staticClass:"columns is-multiline"},t._l(t.moviedetail,(function(e){return i("div",{key:e.m_id,staticClass:"listmovie column is-3 mt-5"},[i("div",{staticClass:"card",staticStyle:{"background-image":"linear-gradient(rgb(116, 203, 255), white)"}},[i("div",{staticClass:"card-image pt-5"},[i("figure",[i("img",{staticStyle:{width:"180px",height:"284px","box-shadow":"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},attrs:{src:t.image(e.img_movie),alt:"Placeholder image"}})])]),i("div",{staticClass:"card-content"},[i("div",{staticClass:"content",staticStyle:{height:"40px"}},[t._v(" "+t._s(e.m_name)+" ")])])]),0==t.deleteButton?i("footer",{staticClass:"card-footer has-background-info"},[i("router-link",{staticClass:"card-footer-item has-text-light",attrs:{to:"/movies/detail/"+e.m_id}},[i("span",[t._v("More details")])])],1):t._e(),1==t.deleteButton?i("footer",{staticClass:"card-footer"},[i("router-link",{staticClass:"card-footer-item has-text-black has-background-warning",attrs:{to:"/add/movies/"+e.m_id}},[i("span",[t._v("Edit")])]),i("a",{staticClass:"card-footer-item has-text-light has-background-danger",on:{click:function(i){return t.deleteMovie(e.m_id,e.m_name)}}},[i("span",[t._v("Delete")])])],1):t._e()])})),0)])])])},s=[],o=i(4408),n={name:"app",props:["user"],data:function(){return{searchdetail:"",moviedetail:[],sortdetail:"m_name asc",deleteButton:!1}},mounted:function(){window.scrollTo(0,0),this.getMovie()},methods:{getMovie:function(){var t=this;o.Z.get("http://localhost:3000/movies/detail",{params:{searchdetail:this.searchdetail,sortdetail:this.sortdetail}}).then((function(e){t.moviedetail=e.data.moviedetail})).catch((function(t){console.log(t)}))},image:function(t){return t?"http://localhost:3000/"+t:"https://bulma.io/images/placeholders/640x360.png"},deleteMovie:function(t,e){var i=this,a=confirm("Are you sure you want to delete "+"".concat(e));a&&o.Z["delete"]("http://localhost:3000/movies/delete/".concat(t)).then((function(t){i.getMovie(),i.deleteButton=!1,console.log(t)})).catch((function(t){alert(t.response.data.message)}))},isAdmin:function(){return!!this.user&&"admin"==this.user.role},isCusto:function(){return!!this.user&&"customer"==this.user.role}}},l=n,r=i(1001),c=(0,r.Z)(l,a,s,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=818-legacy.17e1f33c.js.map