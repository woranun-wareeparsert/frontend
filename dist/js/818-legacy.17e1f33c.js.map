{"version":3,"file":"js/818-legacy.17e1f33c.js","mappings":"4JAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,UAAU,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,IAAI,CAACE,YAAY,wBAAwB,CAACN,EAAIO,GAAG,2BAA2BH,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,QAAQ,CAACI,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOX,EAAgB,aAAEY,WAAW,iBAAiBN,YAAY,kBAAkBO,MAAM,CAAC,KAAO,OAAO,YAAc,gBAAgBC,SAAS,CAAC,MAASd,EAAgB,cAAGe,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOC,OAAOC,YAAqBlB,EAAImB,aAAaH,EAAOC,OAAON,aAAYP,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,SAAS,CAACE,YAAY,qCAAqCS,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIoB,cAAc,CAAChB,EAAG,SAAS,CAACJ,EAAIO,GAAG,sBAAsBH,EAAG,UAAU,CAACE,YAAY,UAAUO,MAAM,CAAC,GAAK,QAAQ,CAACT,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAAEN,EAAIqB,UAAWjB,EAAG,cAAc,CAACS,MAAM,CAAC,GAAK,gBAAgB,CAACT,EAAG,SAAS,CAACE,YAAY,qBAAqB,CAACF,EAAG,SAAS,CAACJ,EAAIO,GAAG,mBAAmBP,EAAIsB,KAA0B,GAApBtB,EAAIuB,cAAyBvB,EAAIqB,UAAWjB,EAAG,SAAS,CAACE,YAAY,wBAAwBS,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAIuB,cAAgBvB,EAAIuB,gBAAgB,CAACnB,EAAG,SAAS,CAACJ,EAAIO,GAAG,kBAAkBP,EAAIsB,KAA0B,GAApBtB,EAAIuB,cAAwBvB,EAAIqB,UAAWjB,EAAG,SAAS,CAACE,YAAY,sBAAsBS,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAIuB,cAAgBvB,EAAIuB,gBAAgB,CAACnB,EAAG,SAAS,CAACJ,EAAIO,GAAG,cAAcP,EAAIsB,KAAKlB,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,SAAS,CAACI,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOX,EAAc,WAAEY,WAAW,eAAeG,GAAG,CAAC,OAAS,CAAC,SAASC,GAAQ,IAAIQ,EAAgBC,MAAMC,UAAUC,OAAOC,KAAKZ,EAAOC,OAAOY,SAAQ,SAASC,GAAG,OAAOA,EAAEC,YAAWC,KAAI,SAASF,GAAG,IAAIG,EAAM,WAAYH,EAAIA,EAAEI,OAASJ,EAAEnB,MAAM,OAAOsB,KAAOjC,EAAImC,WAAWnB,EAAOC,OAAOmB,SAAWZ,EAAgBA,EAAc,IAAI,SAASR,GAAQ,OAAOhB,EAAIoB,eAAe,CAAChB,EAAG,SAAS,CAACS,MAAM,CAAC,MAAQ,eAAe,CAACb,EAAIO,GAAG,uBAAuBH,EAAG,SAAS,CAACS,MAAM,CAAC,MAAQ,gBAAgB,CAACb,EAAIO,GAAG,4BAA4B,KAAKH,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,wBAAwBN,EAAIqC,GAAIrC,EAAe,aAAE,SAASsC,GAAO,OAAOlC,EAAG,MAAM,CAACmC,IAAID,EAAME,KAAKlC,YAAY,8BAA8B,CAACF,EAAG,MAAM,CAACE,YAAY,OAAOmC,YAAY,CAAC,mBAAmB,+CAA+C,CAACrC,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,SAAS,CAACA,EAAG,MAAM,CAACqC,YAAY,CAAC,MAAQ,QAAQ,OAAS,QAAQ,aAAa,wEAAwE5B,MAAM,CAAC,IAAMb,EAAI0C,MAAMJ,EAAMK,WAAW,IAAM,2BAA2BvC,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,UAAUmC,YAAY,CAAC,OAAS,SAAS,CAACzC,EAAIO,GAAG,IAAIP,EAAI4C,GAAGN,EAAMO,QAAQ,WAAgC,GAApB7C,EAAIuB,aAAuBnB,EAAG,SAAS,CAACE,YAAY,mCAAmC,CAACF,EAAG,cAAc,CAACE,YAAY,kCAAkCO,MAAM,CAAC,GAAM,kBAAqByB,EAAU,OAAK,CAAClC,EAAG,OAAO,CAACJ,EAAIO,GAAG,qBAAqB,GAAGP,EAAIsB,KAA0B,GAApBtB,EAAIuB,aAAsBnB,EAAG,SAAS,CAACE,YAAY,eAAe,CAACF,EAAG,cAAc,CAACE,YAAY,yDAAyDO,MAAM,CAAC,GAAM,eAAkByB,EAAU,OAAK,CAAClC,EAAG,OAAO,CAACJ,EAAIO,GAAG,YAAYH,EAAG,IAAI,CAACE,YAAY,wDAAwDS,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAI8C,YAAYR,EAAME,KAAMF,EAAMO,WAAW,CAACzC,EAAG,OAAO,CAACJ,EAAIO,GAAG,eAAe,GAAGP,EAAIsB,UAAS,UAC5kHyB,EAAkB,G,UC0FtB,GACEtC,KAAM,MACNuC,MAAO,CAAC,QACRC,KAHF,WAII,MAAO,CACL9B,aAAc,GACd+B,YAAa,GACbf,WAAY,aACZZ,cAAc,IAGlB4B,QAXF,WAYIC,OAAOC,SAAS,EAAG,GACnBpD,KAAKmB,YAEPkC,QAAS,CACPlC,SADJ,WACA,WACMmC,EAAAA,EAAAA,IACN,uCACQ,OAARC,CACU,aAAVrC,KAAAA,aACU,WAAVgB,KAAAA,cAGAsB,MAAA,YACQ,EAAR,kCAEAC,OAAA,YACQ,QAARC,IAAAA,OAGIjB,MAhBJ,SAgBAkB,GACM,OAAN,EACe,yBAA2BA,EAE3B,oDAGXd,YAvBJ,SAuBAe,EAAAvB,GAAA,WACA,2DACUwB,GACFP,EAAAA,EAAAA,UAAR,8CACAM,IACAJ,MAAA,YACU,EAAV,WACU,EAAV,gBACUE,QAAQI,IAAIC,MAEtBN,OAAA,YACUO,MAAMC,EAAMF,SAASf,KAAKkB,aAIhC9C,QAtCJ,WAuCM,QAAKpB,KAAKmE,MACe,SAAlBnE,KAAKmE,KAAKC,MAEnBC,QA1CJ,WA2CM,QAAKrE,KAAKmE,MACe,YAAlBnE,KAAKmE,KAAKC,QCtJ0O,I,UCO7PE,GAAY,OACd,EACAxE,EACAgD,GACA,EACA,KACA,KACA,MAIF,EAAewB,EAAiB","sources":["webpack://frontend/./src/views/movie.vue?01ba","webpack://frontend/src/views/movie.vue","webpack://frontend/./src/views/movie.vue?bb63","webpack://frontend/./src/views/movie.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container is-widescreen\"},[_c('section',{staticClass:\"hero\"},[_c('div',{staticClass:\"hero-body\"},[_c('p',{staticClass:\"title has-text-white\"},[_vm._v(\"รายการภาพยนตร์ทั้งหมด\")]),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-10\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchdetail),expression:\"searchdetail\"}],staticClass:\"input is-danger\",attrs:{\"type\":\"text\",\"placeholder\":\"Search Movie\"},domProps:{\"value\":(_vm.searchdetail)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.searchdetail=$event.target.value}}})]),_c('div',{staticClass:\"column is-2\"},[_c('button',{staticClass:\"button is-danger px-3 is-fullwidth\",on:{\"click\":function($event){return _vm.getMovie()}}},[_c('strong',[_vm._v(\"Search\")])])])])])]),_c('section',{staticClass:\"section\",attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"field level-right\"},[_c('div',{staticClass:\"control\"},[(_vm.isAdmin())?_c('router-link',{attrs:{\"to\":\"/add/movies\"}},[_c('button',{staticClass:\"button is-warning\"},[_c('strong',[_vm._v(\"Add Movie\")])])]):_vm._e(),(_vm.deleteButton == false && _vm.isAdmin())?_c('button',{staticClass:\"button is-danger ml-5\",on:{\"click\":function($event){_vm.deleteButton = !_vm.deleteButton}}},[_c('strong',[_vm._v(\"Edit Movie\")])]):_vm._e(),(_vm.deleteButton == true && _vm.isAdmin())?_c('button',{staticClass:\"button is-info ml-5\",on:{\"click\":function($event){_vm.deleteButton = !_vm.deleteButton}}},[_c('strong',[_vm._v(\"Cancel\")])]):_vm._e(),_c('div',{staticClass:\"select ml-5 is-danger\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sortdetail),expression:\"sortdetail\"}],on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.sortdetail=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){return _vm.getMovie()}]}},[_c('option',{attrs:{\"value\":\"m_name asc\"}},[_vm._v(\"เรียงลำดับจาก a-z\")]),_c('option',{attrs:{\"value\":\"m_name desc\"}},[_vm._v(\"เรียงลำดับจาก z-a\")])])])],1)]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"columns is-multiline\"},_vm._l((_vm.moviedetail),function(movie){return _c('div',{key:movie.m_id,staticClass:\"listmovie column is-3 mt-5\"},[_c('div',{staticClass:\"card\",staticStyle:{\"background-image\":\"linear-gradient(rgb(116, 203, 255), white)\"}},[_c('div',{staticClass:\"card-image pt-5\"},[_c('figure',[_c('img',{staticStyle:{\"width\":\"180px\",\"height\":\"284px\",\"box-shadow\":\"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px\"},attrs:{\"src\":_vm.image(movie.img_movie),\"alt\":\"Placeholder image\"}})])]),_c('div',{staticClass:\"card-content\"},[_c('div',{staticClass:\"content\",staticStyle:{\"height\":\"40px\"}},[_vm._v(\" \"+_vm._s(movie.m_name)+\" \")])])]),(_vm.deleteButton == false)?_c('footer',{staticClass:\"card-footer has-background-info\"},[_c('router-link',{staticClass:\"card-footer-item has-text-light\",attrs:{\"to\":(\"/movies/detail/\" + (movie.m_id))}},[_c('span',[_vm._v(\"More details\")])])],1):_vm._e(),(_vm.deleteButton == true)?_c('footer',{staticClass:\"card-footer\"},[_c('router-link',{staticClass:\"card-footer-item has-text-black has-background-warning\",attrs:{\"to\":(\"/add/movies/\" + (movie.m_id))}},[_c('span',[_vm._v(\"Edit\")])]),_c('a',{staticClass:\"card-footer-item has-text-light has-background-danger\",on:{\"click\":function($event){return _vm.deleteMovie(movie.m_id, movie.m_name)}}},[_c('span',[_vm._v(\"Delete\")])])],1):_vm._e()])}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container is-widescreen\">\r\n    <section class=\"hero\">\r\n      <div class=\"hero-body\">\r\n        <p class=\"title has-text-white\">รายการภาพยนตร์ทั้งหมด</p>\r\n        <div class=\"columns\">\r\n          <div class=\"column is-10\">\r\n            <input\r\n              class=\"input is-danger\"\r\n              type=\"text\"\r\n              v-model=\"searchdetail\"\r\n              placeholder=\"Search Movie\"\r\n            />\r\n          </div>\r\n          <div class=\"column is-2\">\r\n            <button class=\"button is-danger px-3 is-fullwidth\" @click=\"getMovie()\">\r\n              <strong>Search</strong>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <section class=\"section\" id=\"app\">\r\n      <div class=\"field level-right\">\r\n        <div class=\"control\">\r\n        <router-link to=\"/add/movies\" v-if=\"isAdmin()\"><button class=\"button is-warning\">\r\n              <strong>Add Movie</strong>\r\n            </button></router-link>\r\n            <button  class=\"button is-danger ml-5\" @click=\"deleteButton = !deleteButton\" v-if=\"deleteButton == false && isAdmin()\">\r\n              <strong>Edit Movie</strong>\r\n            </button>\r\n            <button class=\"button is-info ml-5\" @click=\"deleteButton = !deleteButton\" v-if=\"deleteButton == true && isAdmin()\">\r\n              <strong>Cancel</strong>\r\n            </button>\r\n          <div class=\"select ml-5 is-danger\">\r\n            <select v-model=\"sortdetail\" @change=\"getMovie()\">\r\n              <option value=\"m_name asc\">เรียงลำดับจาก a-z</option>\r\n              <option value=\"m_name desc\">เรียงลำดับจาก z-a</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"content\">\r\n        <div class=\"columns is-multiline\">\r\n          <!-- loop -->\r\n          <div class=\"listmovie column is-3 mt-5\" v-for=\"(movie) in moviedetail\" :key=\"movie.m_id\">\r\n            <div class=\"card\" style=\" background-image: linear-gradient(rgb(116, 203, 255), white);\">\r\n              <div class=\"card-image pt-5\">\r\n                <figure>\r\n                  <!-- ไว้ใส่รูป -->\r\n                  <img style=\" width: 180px; height: 284px; box-shadow: rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px;\"\r\n                    :src=\"image(movie.img_movie)\"\r\n                    alt=\"Placeholder image\"\r\n                  />\r\n                </figure>\r\n              </div>\r\n              <div class=\"card-content\">\r\n                <div class=\"content\" style=\"height: 40px\">\r\n                  {{ movie.m_name }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <footer class=\"card-footer has-background-info\" v-if=\"deleteButton == false\">\r\n              <router-link\r\n                :to=\"`/movies/detail/${movie.m_id}`\"\r\n                class=\"card-footer-item has-text-light\"\r\n              >\r\n                <span>More details</span></router-link\r\n              >\r\n            </footer>\r\n              <footer class=\"card-footer\" v-if=\"deleteButton == true\">\r\n              <router-link :to=\"`/add/movies/${movie.m_id}`\"\r\n                class=\"card-footer-item has-text-black has-background-warning\"\r\n              >\r\n                <span>Edit</span></router-link\r\n              >\r\n                            <a @click=\"deleteMovie(movie.m_id, movie.m_name)\"\r\n                class=\"card-footer-item has-text-light has-background-danger\"\r\n              >\r\n                <span>Delete</span></a\r\n              >\r\n            </footer>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from '@/plugins/axios'\r\nexport default {\r\n  name: \"app\",\r\n  props: ['user'],\r\n  data() {\r\n    return {\r\n      searchdetail: \"\",\r\n      moviedetail: [],\r\n      sortdetail: \"m_name asc\",\r\n      deleteButton: false\r\n    };\r\n  },\r\n  mounted() {\r\n    window.scrollTo(0, 0)\r\n    this.getMovie();\r\n  },\r\n  methods: {\r\n    getMovie() {\r\n      axios\r\n        .get(\"http://localhost:3000/movies/detail\", {\r\n          params: {\r\n            searchdetail: this.searchdetail,\r\n            sortdetail: this.sortdetail,\r\n          },\r\n        })\r\n        .then((response) => {\r\n          this.moviedetail = response.data.moviedetail;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    image(file_path){\r\n        if (file_path) {\r\n        return \"http://localhost:3000/\" + file_path;\r\n      } else {\r\n        return \"https://bulma.io/images/placeholders/640x360.png\";\r\n      }\r\n    },\r\n    deleteMovie(id, movie){\r\n      const result = confirm('Are you sure you want to delete '+`${movie}`);\r\n      if (result){\r\n        axios\r\n        .delete(`http://localhost:3000/movies/delete/${id}`)\r\n        .then((response) => {\r\n          this.getMovie();\r\n          this.deleteButton = false\r\n          console.log(response)\r\n        })\r\n        .catch((error) => {\r\n          alert(error.response.data.message)\r\n        });\r\n      }\r\n    },\r\n    isAdmin(){\r\n      if (!this.user) return false\r\n      return this.user.role == 'admin'\r\n    },\r\n    isCusto(){\r\n      if (!this.user) return false\r\n      return this.user.role == 'customer'\r\n    }\r\n    \r\n  },\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./movie.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./movie.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./movie.vue?vue&type=template&id=651f4163&\"\nimport script from \"./movie.vue?vue&type=script&lang=js&\"\nexport * from \"./movie.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","attrs","domProps","on","$event","target","composing","searchdetail","getMovie","isAdmin","_e","deleteButton","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","sortdetail","multiple","_l","movie","key","m_id","staticStyle","image","img_movie","_s","m_name","deleteMovie","staticRenderFns","props","data","moviedetail","mounted","window","scrollTo","methods","axios","params","then","catch","console","file_path","id","result","log","response","alert","error","message","user","role","isCusto","component"],"sourceRoot":""}