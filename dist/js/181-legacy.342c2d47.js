"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[181],{8181:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section",attrs:{id:"app"}},[s("div",{staticClass:"content"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("img",{staticStyle:{width:"432px",height:"587px","margin-left":"15%","margin-right":"15%"},attrs:{src:t.image(t.movie.img_movie)}})]),s("div",{staticClass:"column is-6 level-right"},[s("div",{staticClass:"title"},[s("p",{staticClass:"title has-text-white"},[t._v(t._s(t.movie.m_name))])]),s("hr"),s("div",{staticClass:"detail"},[s("p",{staticClass:"has-text-white has-text-justified"},[t._v(" "+t._s(t.movie.plot)+" ")]),s("table",{staticClass:"table is-bordered has-background-black has-text-white"},[s("tr",[s("td",[t._v("Release Date")]),s("td",[t._v(t._s(t.movie.release_date))])]),s("tr",[s("td",[t._v("Director")]),s("td",[t._v(t._s(t.movie.director))])]),s("tr",[s("td",[t._v("Cast")]),s("td",[t._v(" "+t._s(t.movie.actors)+" ")])])])])])]),s("div",{staticClass:"column m-5"},[s("p",{staticClass:"title has-text-white"},[t._v("รอบฉาย")]),s("div",{staticClass:"field level-right"},[s("div",{staticClass:"control"},[t.isAdmin()?s("router-link",{attrs:{to:"/AddShow/"+t.movie.m_id}},[s("button",{staticClass:"button is-warning"},[s("strong",[t._v("Add Show")])])]):t._e(),0==t.editShow&&t.isAdmin()?s("span",[s("button",{staticClass:"button is-danger ml-5",on:{click:function(e){return t.checkEditShow()}}},[s("strong",[t._v("Edit Show")])])]):1==t.editShow&&t.isAdmin()?s("span",[s("button",{staticClass:"button is-info ml-5",on:{click:function(e){return t.CancelEditShow()}}},[s("strong",[t._v("Cancel")])])]):t._e()],1)]),s("table",{staticClass:"table is-bordered has-background-danger-dark has-text-white"},[t._m(0),t._l(t.show,(function(e){return s("tr",{key:e.show_id,staticClass:"has-background-danger-light has-text-black"},[s("td",[t._v(t._s(e.tname))]),s("td",[t._v(t._s(e.show_date))]),s("td",[t._v(t._s(e.st_time))]),s("td",[t._v(t._s(e.end_time))]),s("td",[t._v(t._s(e.language))]),s("td",[0==t.editShow?s("div",[s("router-link",{attrs:{to:"/show/"+e.show_id}},[s("button",{staticClass:"button is-success"},[s("span",[t._v("Click")])])])],1):s("span",[s("router-link",{attrs:{to:"/edit/show/"+e.show_id}},[s("button",{staticClass:"button is-warning ml-2",on:{click:function(s){return t.EditShow(e.show_id)}}},[s("span",[t._v("Edit")])])]),s("button",{staticClass:"button is-danger ml-2",on:{click:function(s){return t.DeleteShow(e.show_id)}}},[s("span",[t._v("Delete")])])],1)])])})),0==t.show.length?s("tr",{staticClass:"has-background-danger-light has-text-black"},[s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v("-")])]):t._e()],2)])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",[t._v("Theatre")]),s("td",[t._v("Date")]),s("td",[t._v("Start")]),s("td",[t._v("End")]),s("td",[t._v("Language")]),s("td",[t._v("Link")])])}],o=s(4408),n={name:"app",props:["user"],data:function(){return{movie:[],show:[],editShow:!1}},mounted:function(){window.scrollTo(0,0),this.getMovieDetail(this.$route.params.id)},methods:{getMovieDetail:function(t){var e=this;o.Z.get("http://localhost:3000/movies/detail/".concat(t)).then((function(t){e.movie=t.data.moviedetail[0],e.show=t.data.show,e.movie.release_date=new Date(e.movie.release_date).toDateString();for(var s=0;s<e.show.length;s++)e.show[s].show_date=new Date(e.show[s].show_date).toDateString()})).catch((function(t){console.log(t)}))},image:function(t){return t?"http://localhost:3000/"+t:"https://bulma.io/images/placeholders/640x360.png"},isAdmin:function(){return!!this.user&&"admin"==this.user.role},isCusto:function(){return!!this.user&&"customer"==this.user.role},checkEditShow:function(){this.editShow=!0},CancelEditShow:function(){this.editShow=!1},DeleteShow:function(t){var e=this,s=confirm("Are you sure you want to delete this show ?");s&&o.Z["delete"]("http://localhost:3000/show/delete/".concat(t)).then((function(t){e.getMovieDetail(e.$route.params.id),e.editShow=!1,console.log(t)})).catch((function(t){alert(t.response.data.message)}))}}},l=n,r=s(1001),d=(0,r.Z)(l,i,a,!1,null,null,null),c=d.exports}}]);
//# sourceMappingURL=181-legacy.342c2d47.js.map