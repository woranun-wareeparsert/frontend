"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[676],{5676:function(t,s,e){e.r(s),e.d(s,{default:function(){return h}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"section",attrs:{id:"app"}},[e("div",{staticClass:"content"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("img",{staticStyle:{width:"432px",height:"587px","margin-left":"15%","margin-right":"15%"},attrs:{src:t.image(t.movie.img_movie)}})]),e("div",{staticClass:"column is-6 level-right"},[e("div",{staticClass:"title"},[e("p",{staticClass:"title has-text-white"},[t._v(t._s(t.movie.m_name))])]),e("hr"),e("div",{staticClass:"detail"},[e("p",{staticClass:"has-text-white has-text-justified"},[t._v(" "+t._s(t.movie.plot)+" ")]),e("table",{staticClass:"table is-bordered has-background-black has-text-white"},[e("tr",[e("td",[t._v("Theatre")]),e("td",[t._v(t._s(t.movie.tname))])]),e("tr",[e("td",[t._v("Date")]),e("td",[t._v(t._s(t.movie.show_date))])]),e("tr",[e("td",[t._v("Time")]),e("td",[t._v(t._s(t.movie.st_time)+" - "+t._s(t.movie.end_time))])]),e("tr",[e("td",[t._v("Language")]),e("td",[t._v(t._s(t.movie.language))])]),e("tr",[e("td",[t._v("Director")]),e("td",[t._v(t._s(t.movie.director))])]),e("tr",[e("td",[t._v("Cast")]),e("td",[t._v(" "+t._s(t.movie.actors)+" ")])])])])])]),e("div",{staticClass:"columns m-5 is-multiline"},[e("div",{staticClass:"column is-8"},[e("table",{staticClass:"mx-auto",staticStyle:{width:"80%"}},[e("tbody",t._l(t.rows,(function(s){return e("tr",{key:s},t._l(t.cols,(function(i){return e("td",{key:i,staticClass:"pl-2"},[t.seatBook.includes(s+i)?e("div",{staticClass:" has-text-white"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969286008040468510/reserved.png"}}),t._v(" "+t._s(s)+t._s(i)+" ")]):t.selectSeats.includes(s+i)&&t.isCusto()?e("a",{on:{click:function(e){return t.selectSeat(s,i)}}},[e("div",{staticClass:" has-text-white"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969286008229220362/select.png"}}),t._v(" "+t._s(s)+t._s(i)+" ")])]):"Normal"==t.getType(s,i)?e("a",{on:{click:function(e){return t.selectSeat(s,i)}}},[e("div",{staticClass:"has-text-white"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005338251274/seat.png"}}),t._v(" "+t._s(s)+t._s(i)+" ")])]):"Honeymoon"==t.getType(s,i)?e("a",{on:{click:function(e){return t.selectSeat(s,i)}}},[e("div",{staticClass:"has-text-white"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005833166878/seatHoneymoon.png"}}),t._v(" "+t._s(s)+t._s(i)+" ")])]):"First Class"==t.getType(s,i)?e("a",{on:{click:function(e){return t.selectSeat(s,i)}}},[e("div",{staticClass:"has-text-white"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005598281798/seatFirstclass.png"}}),t._v(" "+t._s(s)+t._s(i)+" ")])]):t._e()])})),0)})),0)]),t._m(0),t._m(1)]),t.isCusto()?e("div",{staticClass:"column is-4"},[e("p",{staticClass:"has-text-left has-text-white is-size-5"},[t._v("SUMMARY")]),e("div",{staticClass:"box has-text-white has-background-grey"},[e("div",{staticClass:"columns mt-2"},[e("img",{staticStyle:{width:"132px",height:"187px","margin-left":"10%","margin-right":"5%"},attrs:{src:t.image(t.movie.img_movie)}}),e("p",{staticClass:"has-text-left"},[e("b",[t._v(t._s(t.movie.m_name)+" ("+t._s(t.movie.language)+")")]),t._v(" "),e("br"),e("br"),t._v(" "+t._s(t.movie.show_date)+" "),e("br"),t._v(" "+t._s(t.movie.st_time)+" - "+t._s(t.movie.end_time)),e("br"),e("br"),e("span",{staticClass:"is-italic"},[t._v(" "+t._s(t.movie.tname)+" Theatre"),e("br"),t._v(" "+t._s(t.movie.location))])])]),e("div",{staticClass:"columns ml-5"},[e("div",{staticClass:"column is-6 has-text-left"},[t._v("Seats: "+t._s(t.selectSeats))]),e("div",{staticClass:"column is-6"},[t._v("Price: "+t._s(t.priceOrder)+" ฿")])]),t.selectSeats.length>0?e("div",{staticClass:"column"},[e("button",{staticClass:"button is-danger is-fullwidth is-rounded",on:{click:function(s){return t.confirmOrder(t.user.cid)}}},[e("span",[t._v("Confirm Order")])])]):t._e()])]):t._e()])]),t.isCusto()?e("div",{staticClass:"modal",class:{"is-active":t.confirmModal}},[e("div",{staticClass:"modal-background"}),e("div",{staticClass:"modal-card"},[t._m(2),e("section",{staticClass:"modal-card-body"},[e("img",{staticStyle:{width:"132px",height:"187px","margin-left":"10%","margin-right":"5%","margin-bottom":"5%"},attrs:{src:t.image(t.movie.img_movie)}}),e("p",{staticClass:"has-text-centered"},[e("b",[t._v(t._s(t.movie.m_name)+" ("+t._s(t.movie.language)+")")])]),e("br"),e("p",{staticClass:"has-text-left"},[e("b",[t._v("Date:    ")]),t._v(t._s(t.movie.show_date)+", "+t._s(t.movie.st_time)+" - "+t._s(t.movie.end_time))]),e("p",{staticClass:"has-text-left"},[e("b",[t._v("Location:  ")]),t._v(t._s(t.movie.tname)+" Theatre, "+t._s(t.movie.location))]),e("p",{staticClass:"has-text-left"},[e("b",[t._v("Seats:  ")]),t._v(" "+t._s(t.selectSeats))]),e("p",{staticClass:"has-text-left"},[e("b",[t._v("Total Price:  ")]),t._v(" "+t._s(t.priceOrder)+" ฿")])]),e("footer",{staticClass:"modal-card-foot"},[e("router-link",{staticClass:"card-footer-item has-text-light",attrs:{to:"/booking/"+this.orderId}},[e("button",{staticClass:"button is-danger"},[t._v("Yes")])]),e("button",{staticClass:"button",on:{click:function(s){return t.closeModal()}}},[t._v("No")])],1)])]):t._e()])},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"columns is-centered has-background-danger-dark p-2 mt-5"},[e("p",{staticClass:"is-size-3 has-text-white"},[t._v("SCREEN")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"columns is-centered is-multiline mt-5"},[e("div",{staticClass:"column is-1 has-text-white is-size-7"},[e("img",{staticStyle:{width:"80%",height:"60%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005338251274/seat.png"}}),e("br"),t._v("200 ฿ ")]),e("div",{staticClass:"column is-1 has-text-white is-size-7"},[e("img",{staticStyle:{width:"80%",height:"60%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005833166878/seatHoneymoon.png"}}),e("br"),t._v("260 ฿ ")]),e("div",{staticClass:"column is-1 has-text-white is-size-7"},[e("img",{staticStyle:{width:"80%",height:"60%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969283005598281798/seatFirstclass.png"}}),e("br"),t._v("300 ฿ ")]),e("div",{staticClass:"column is-1 has-text-white is-size-7"},[e("img",{staticStyle:{width:"80%",height:"60%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969286008040468510/reserved.png"}}),e("br"),t._v("Reserved ")]),e("div",{staticClass:"column is-1 has-text-white is-size-7"},[e("img",{staticStyle:{width:"80%",height:"60%"},attrs:{src:"https://media.discordapp.net/attachments/953696113448337498/969286008229220362/select.png"}}),e("br"),t._v("Selecting ")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[e("strong",[t._v("Confirm Order")])])])}],o=e(4408),c={name:"app",props:["user"],data(){return{seat:[],movie:[],seatBook:[],rows:[],cols:[],selectSeats:[],color:null,confirmModal:!1,orderId:null,orderType:[],itemId:[],seatId:[]}},mounted(){window.scrollTo(0,0),this.getSeat(this.$route.params.id)},computed:{priceOrder(){for(var t=0,s=0;s<this.selectSeats.length;s++)for(var e=0;e<this.seat.length;e++)this.seat[e].no_of_seats==this.selectSeats[s]&&(t+=this.seat[e].type_price);return t}},methods:{getSeat(t){o.Z.get(`http://localhost:3000/movie/${t}`).then((t=>{this.seat=t.data.seat,this.movie=t.data.movie[0],this.getSeatBook(t.data.seatBook),this.movie.show_date=new Date(this.movie.show_date).toDateString(),1==this.seat[0].THEATRE_tid||2==this.seat[0].THEATRE_tid?(this.rows=["A","B","C","D","E"],this.cols=["01","02","03","04","05","06","07","08","09","10"]):3==this.seat[0].THEATRE_tid&&(this.rows=["A","B","C"],this.cols=["01","02","03","04","05"])})).catch((t=>{console.log(t)}))},getSeatBook(t){for(var s=0;s<t.length;s++)this.seatBook.push(t[s].no_of_seats)},selectSeat(t,s){this.selectSeats.includes(t+s)?this.selectSeats.splice(this.selectSeats.indexOf(t+s),1):this.selectSeats.push(t+s)},getType(t,s){for(var e=0;e<this.seat.length;e++)if(this.seat[e].no_of_seats.includes(t+s))var i=e;return this.seat[i].type_name},confirmOrder(t){this.confirmModal=!0;for(var s=0;s<this.selectSeats.length;s++)for(var e=0;e<this.seat.length;e++)this.seat[e].no_of_seats==this.selectSeats[s]&&this.orderType.push(this.seat[e].type_price);this.getSeatId(),o.Z.put(`http://localhost:3000/movie/confirm/${t}`,{selectSeat:this.selectSeats,price:this.priceOrder,type:this.orderType,movie:this.movie,seatId:this.seatId}).then((t=>{this.orderId=t.data.orderId,this.itemId=t.data.itemId,console.log(this.orderId)})).catch((t=>{console.log(t)}))},closeModal(){this.confirmModal=!1,this.orderType=[],o.Z["delete"](`http://localhost:3000/movie/cancel/${this.orderId}`,{itemId:this.itemId}).then((t=>{})).catch((t=>{console.log(t)}))},getSeatId(){for(var t=0;t<this.selectSeats.length;t++)for(var s=0;s<this.seat.length;s++)this.selectSeats[t]==this.seat[s].no_of_seats&&this.seatId.push(this.seat[s].seat_id);console.log(this.seatId)},image(t){return t?"http://localhost:3000/"+t:"https://bulma.io/images/placeholders/640x360.png"},isAdmin(){return!!this.user&&"admin"==this.user.role},isCusto(){return!!this.user&&"customer"==this.user.role}}},r=c,l=e(1001),n=(0,l.Z)(r,i,a,!1,null,null,null),h=n.exports}}]);
//# sourceMappingURL=676.ac9bbb6d.js.map