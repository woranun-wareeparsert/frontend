"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[818],{9818:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container is-widescreen"},[s("section",{staticClass:"hero"},[s("div",{staticClass:"hero-body"},[s("p",{staticClass:"title has-text-white"},[t._v("รายการภาพยนตร์ทั้งหมด")]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-10"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchdetail,expression:"searchdetail"}],staticClass:"input is-danger",attrs:{type:"text",placeholder:"Search Movie"},domProps:{value:t.searchdetail},on:{input:function(e){e.target.composing||(t.searchdetail=e.target.value)}}})]),s("div",{staticClass:"column is-2"},[s("button",{staticClass:"button is-danger px-3 is-fullwidth",on:{click:function(e){return t.getMovie()}}},[s("strong",[t._v("Search")])])])])])]),s("section",{staticClass:"section",attrs:{id:"app"}},[s("div",{staticClass:"field level-right"},[s("div",{staticClass:"control"},[t.isAdmin()?s("router-link",{attrs:{to:"/add/movies"}},[s("button",{staticClass:"button is-warning"},[s("strong",[t._v("Add Movie")])])]):t._e(),0==t.deleteButton&&t.isAdmin()?s("button",{staticClass:"button is-danger ml-5",on:{click:function(e){t.deleteButton=!t.deleteButton}}},[s("strong",[t._v("Edit Movie")])]):t._e(),1==t.deleteButton&&t.isAdmin()?s("button",{staticClass:"button is-info ml-5",on:{click:function(e){t.deleteButton=!t.deleteButton}}},[s("strong",[t._v("Cancel")])]):t._e(),s("div",{staticClass:"select ml-5 is-danger"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.sortdetail,expression:"sortdetail"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortdetail=e.target.multiple?s:s[0]},function(e){return t.getMovie()}]}},[s("option",{attrs:{value:"m_name asc"}},[t._v("เรียงลำดับจาก a-z")]),s("option",{attrs:{value:"m_name desc"}},[t._v("เรียงลำดับจาก z-a")])])])],1)]),s("div",{staticClass:"content"},[s("div",{staticClass:"columns is-multiline"},t._l(t.moviedetail,(function(e){return s("div",{key:e.m_id,staticClass:"listmovie column is-3 mt-5"},[s("div",{staticClass:"card",staticStyle:{"background-image":"linear-gradient(rgb(116, 203, 255), white)"}},[s("div",{staticClass:"card-image pt-5"},[s("figure",[s("img",{staticStyle:{width:"180px",height:"284px","box-shadow":"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},attrs:{src:t.image(e.img_movie),alt:"Placeholder image"}})])]),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content",staticStyle:{height:"40px"}},[t._v(" "+t._s(e.m_name)+" ")])])]),0==t.deleteButton?s("footer",{staticClass:"card-footer has-background-info"},[s("router-link",{staticClass:"card-footer-item has-text-light",attrs:{to:"/movies/detail/"+e.m_id}},[s("span",[t._v("More details")])])],1):t._e(),1==t.deleteButton?s("footer",{staticClass:"card-footer"},[s("router-link",{staticClass:"card-footer-item has-text-black has-background-warning",attrs:{to:"/add/movies/"+e.m_id}},[s("span",[t._v("Edit")])]),s("a",{staticClass:"card-footer-item has-text-light has-background-danger",on:{click:function(s){return t.deleteMovie(e.m_id,e.m_name)}}},[s("span",[t._v("Delete")])])],1):t._e()])})),0)])])])},i=[],o=s(4408),n={name:"app",props:["user"],data(){return{searchdetail:"",moviedetail:[],sortdetail:"m_name asc",deleteButton:!1}},mounted(){window.scrollTo(0,0),this.getMovie()},methods:{getMovie(){o.Z.get("http://localhost:3000/movies/detail",{params:{searchdetail:this.searchdetail,sortdetail:this.sortdetail}}).then((t=>{this.moviedetail=t.data.moviedetail})).catch((t=>{console.log(t)}))},image(t){return t?"http://localhost:3000/"+t:"https://bulma.io/images/placeholders/640x360.png"},deleteMovie(t,e){const s=confirm(`Are you sure you want to delete ${e}`);s&&o.Z["delete"](`http://localhost:3000/movies/delete/${t}`).then((t=>{this.getMovie(),this.deleteButton=!1,console.log(t)})).catch((t=>{alert(t.response.data.message)}))},isAdmin(){return!!this.user&&"admin"==this.user.role},isCusto(){return!!this.user&&"customer"==this.user.role}}},l=n,r=s(1001),c=(0,r.Z)(l,a,i,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=818.58aa33e0.js.map